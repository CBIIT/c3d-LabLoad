
--
-- NCI_UOM_MAPPING  (Table) 
--
CREATE TABLE NCI_UOM_MAPPING
(
  SOURCE         VARCHAR2(30 BYTE),
  PREFERRED      VARCHAR2(30 BYTE),
  LABORATORY     VARCHAR2(10 BYTE),
  CREATED_DATE   DATE,
  CREATED_BY     VARCHAR2(30 BYTE),
  MODIFIED_DATE  DATE,
  MODIFIED_BY    VARCHAR2(30 BYTE)
)
TABLESPACE &&USERS_TABLESPACE;


--
-- NCI_UOM_MAPPING_INDX  (Index) 
--
CREATE INDEX NCI_UOM_MAPPING_INDX ON NCI_UOM_MAPPING
(LABORATORY, SOURCE, PREFERRED)
LOGGING
TABLESPACE &&USERS_TABLESPACE;


--
-- NUM_BRI_SEQ  (Trigger) 
--
CREATE OR REPLACE TRIGGER NUM_BRI_SEQ
   BEFORE INSERT
   ON NCI_UOM_MAPPING 
   FOR EACH ROW
BEGIN

   IF :new.CREATED_BY IS NULL THEN
      :new.CREATED_BY := substr(user,1,30);
   END IF;

   :new.CREATED_DATE := sysdate;
END;
/
SHOW ERRORS;



--
-- NUM_BRU_SEQ  (Trigger) 
--
CREATE OR REPLACE TRIGGER NUM_BRU_SEQ
   BEFORE UPDATE
   ON NCI_UOM_MAPPING 
   FOR EACH ROW
BEGIN

   :new.MODIFIED_BY   := substr(user,1,30);
   :new.MODIFIED_DATE := sysdate;

END;
/
SHOW ERRORS;


