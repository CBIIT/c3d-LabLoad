--
-- NCI_INVALID_RESULTS  (Table) 
--
CREATE TABLE NCI_INVALID_RESULTS
(
  RESULT_VALUE   VARCHAR2(50 BYTE)              NOT NULL,
  DATE_CREATED   DATE,
  DATE_MODIFIED  DATE,
  CREATED_BY     VARCHAR2(30 BYTE),
  MODIFIED_BY    VARCHAR2(30 BYTE)
)
TABLESPACE &&USERS_TABLESPACE;

--
-- IRT_PK  (Index) 
--
CREATE UNIQUE INDEX IRT_PK ON NCI_INVALID_RESULTS
(RESULT_VALUE)
LOGGING
TABLESPACE &&USERS_TABLESPACE;

--
-- IRT_BRI_SEQ  (Trigger) 
--
CREATE OR REPLACE TRIGGER IRT_BRI_SEQ
 BEFORE INSERT
 ON NCI_INVALID_RESULTS 
 REFERENCING OLD AS OLD NEW AS NEW
 FOR EACH ROW
-- PL/SQL BLOCK
BEGIN
   if :new.CREATED_BY IS NULL THEN
   :new.CREATED_BY := user;
   END IF;
   :new.DATE_CREATED := sysdate;
END;
/
SHOW ERRORS;


--
-- IRT_BRU_SEQ  (Trigger) 
--
CREATE OR REPLACE TRIGGER IRT_BRU_SEQ
 BEFORE UPDATE
 ON NCI_INVALID_RESULTS 
 REFERENCING OLD AS OLD NEW AS NEW
 FOR EACH ROW
-- PL/SQL BLOCK
BEGIN
    :new.MODIFIED_BY  := user;
    :new.DATE_MODIFIED := sysdate;
END;
/
SHOW ERRORS;

-- 
-- Non Foreign Key Constraints for Table NCI_INVALID_RESULTS 
-- 
ALTER TABLE NCI_INVALID_RESULTS ADD (
  CONSTRAINT IRT_PK PRIMARY KEY (RESULT_VALUE)
    USING INDEX 
    TABLESPACE USERS);
